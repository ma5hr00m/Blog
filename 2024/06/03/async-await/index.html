<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="async&#x2F;await æ˜¯ JavaScript ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„è¯­æ³•ã€‚å®ƒä»¬å»ºç«‹åœ¨ Promise çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†ä¸€ç§ç®€æ´ç›´è§‚çš„æ–¹å¼æ¥ç¼–å†™å’Œç®¡ç†å¼‚æ­¥ä»£ç ï¼Œç°åœ¨ä¹Ÿå·²ç»æˆä¸ºäº† JavaScript å®é™…ä¸Šçš„æœ€ä½³å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆã€‚ Generatorasync å®è´¨ä¸Šå°±æ˜¯æ—©æœŸçš„ generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚ JavaScript ä¸­çš„ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰å‡½æ•°æ˜¯ ES6 å¼•å…¥ï¼ˆä¸ Promi">
<meta property="og:type" content="article">
<meta property="og:title" content="æµç•…åœ°ä½¿ç”¨ async&#x2F;await">
<meta property="og:url" content="https://blog.kinoko.fun/2024/06/03/async-await/index.html">
<meta property="og:site_name" content="é˜¿è‡ã®åšå®¢">
<meta property="og:description" content="async&#x2F;await æ˜¯ JavaScript ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„è¯­æ³•ã€‚å®ƒä»¬å»ºç«‹åœ¨ Promise çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†ä¸€ç§ç®€æ´ç›´è§‚çš„æ–¹å¼æ¥ç¼–å†™å’Œç®¡ç†å¼‚æ­¥ä»£ç ï¼Œç°åœ¨ä¹Ÿå·²ç»æˆä¸ºäº† JavaScript å®é™…ä¸Šçš„æœ€ä½³å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆã€‚ Generatorasync å®è´¨ä¸Šå°±æ˜¯æ—©æœŸçš„ generator å‡½æ•°çš„è¯­æ³•ç³–ã€‚ JavaScript ä¸­çš„ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰å‡½æ•°æ˜¯ ES6 å¼•å…¥ï¼ˆä¸ Promi">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-06-02T16:00:00.000Z">
<meta property="article:modified_time" content="2025-01-02T07:21:22.215Z">
<meta property="article:author" content="é˜¿è‡kinoko">
<meta property="article:tag" content="ma5hr00m,kinoko,é˜¿è‡kinoko,blog,åšå®¢,åšæ–‡">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>æµç•…åœ°ä½¿ç”¨ async/await</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="é˜¿è‡ã®åšå®¢" type="application/atom+xml" />
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="é¡¶éƒ¨" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">ğŸ“„é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">ğŸ“‚å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">ğŸ‘«å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/categories/">ğŸ—‚ï¸åˆ†ç±»</a></li><!--
     --><!--
       --><li><a href="/tags/">ğŸ·ï¸æ ‡ç­¾</a></li><!--
     --><!--
       --><li><a href="/about/">ğŸŒ¸å…³äº</a></li><!--
     --><!--
       --><li><a href="/log/">ğŸ“–æ—¥å¿—</a></li><!--
     --><!--
       --><li><a href="/search/">ğŸ”æœç´¢</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="ä¸Šä¸€ç¯‡" href="/2024/06/05/browser-eventloop/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="ä¸‹ä¸€ç¯‡" href="/2024/06/01/frp-read/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="è¿”å›é¡¶éƒ¨" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="åˆ†äº«æ–‡ç« " href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://blog.kinoko.fun/2024/06/03/async-await/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://blog.kinoko.fun/2024/06/03/async-await/&text=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://blog.kinoko.fun/2024/06/03/async-await/&is_video=false&description=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=æµç•…åœ°ä½¿ç”¨ async/await&body=Check out this article: https://blog.kinoko.fun/2024/06/03/async-await/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://blog.kinoko.fun/2024/06/03/async-await/&name=æµç•…åœ°ä½¿ç”¨ async/await&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://blog.kinoko.fun/2024/06/03/async-await/&t=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Generator"><span class="toc-number">1.</span> <span class="toc-text">Generator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#co"><span class="toc-number">1.2.</span> <span class="toc-text">co</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94"><span class="toc-number">1.3.</span> <span class="toc-text">å¯¹æ¯”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#async-%E8%AF%AD%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text">async è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#await-%E8%AF%AD%E6%B3%95"><span class="toc-number">2.2.</span> <span class="toc-text">await è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">2.3.</span> <span class="toc-text">é”™è¯¯å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E8%8C%83"><span class="toc-number">2.4.</span> <span class="toc-text">ç¤ºèŒƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E9%A1%BA%E5%BA%8F%E5%AE%8C%E6%88%90%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD"><span class="toc-number">2.5.</span> <span class="toc-text">å®ä¾‹ï¼šé¡ºåºå®Œæˆå¼‚æ­¥åŠ è½½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B6%E5%B1%82-await"><span class="toc-number">3.</span> <span class="toc-text">é¡¶å±‚ await</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E5%9D%91"><span class="toc-number">4.</span> <span class="toc-text">å°å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B7%E7%94%A8-await-%E5%92%8C-then"><span class="toc-number">4.1.</span> <span class="toc-text">æ··ç”¨ await å’Œ .then()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%85%E8%AF%BB%E6%96%87%E6%A1%A3"><span class="toc-number">5.</span> <span class="toc-text">é˜…è¯»æ–‡æ¡£</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        æµç•…åœ°ä½¿ç”¨ async/await
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">é˜¿è‡kinoko</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-06-02T16:00:00.000Z" class="dt-published" itemprop="datePublished">2024-06-03</time>
        
        (Updated: <time datetime="2025-01-02T07:21:22.215Z" class="dt-updated" itemprop="dateModified">2025-01-02</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/JavaScript/">JavaScript</a>
    </div>


      

    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p><code>async/await</code> æ˜¯ JavaScript ç”¨æ¥å¤„ç†å¼‚æ­¥æ“ä½œçš„è¯­æ³•ã€‚å®ƒä»¬å»ºç«‹åœ¨ Promise çš„åŸºç¡€ä¸Šï¼Œæä¾›äº†ä¸€ç§ç®€æ´ç›´è§‚çš„æ–¹å¼æ¥ç¼–å†™å’Œç®¡ç†å¼‚æ­¥ä»£ç ï¼Œç°åœ¨ä¹Ÿå·²ç»æˆä¸ºäº† JavaScript å®é™…ä¸Šçš„æœ€ä½³å¼‚æ­¥ç¼–ç¨‹æ–¹æ¡ˆã€‚</p>
<h2 id="Generator"><a href="#Generator" class="headerlink" title="Generator"></a>Generator</h2><p><code>async</code> å®è´¨ä¸Šå°±æ˜¯æ—©æœŸçš„ <code>generator</code> å‡½æ•°çš„è¯­æ³•ç³–ã€‚</p>
<p>JavaScript ä¸­çš„ç”Ÿæˆå™¨ï¼ˆGeneratorï¼‰å‡½æ•°æ˜¯ ES6 å¼•å…¥ï¼ˆä¸ Promise ä¸€èµ·ï¼‰çš„ä¸€ç§ç‰¹æ®Šç±»å‹çš„å‡½æ•°ã€‚ç”Ÿæˆå™¨è¿™ä¸ªæ¦‚å¿µæœ€åˆæ¥è‡ªäºå…¶ä»–ç¼–ç¨‹è¯­è¨€ï¼Œå¦‚ Pythonï¼ŒæŠŠè¿™ä¸œè¥¿å¼•å…¥åˆ° JavaScript ä¸­ï¼Œä¸»è¦æ˜¯ä¸ºäº†ç®€åŒ–å¼‚æ­¥ç¼–ç¨‹å’Œè¿­ä»£æ“ä½œã€‚</p>
<h3 id="è¯­æ³•"><a href="#è¯­æ³•" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p><code>generator</code> å‡½æ•°çš„æœ¬è´¨æ˜¯ä¸€ç§å¯ä»¥æš‚åœæ‰§è¡Œå’Œæ¢å¤æ‰§è¡Œçš„å‡½æ•°ï¼Œå®ƒè¿”å›ä¸€ä¸ªéµå¾ªè¿­ä»£å™¨åè®®çš„ç”Ÿæˆå™¨å¯¹è±¡ï¼ˆå³ <code>Iterator</code> å¯¹è±¡ï¼‰ã€‚è¿™ä¸ªå¯¹è±¡é€šè¿‡Â <code>next()</code>Â æ–¹æ³•è¿›è¡Œè¿­ä»£ï¼Œæ¯æ¬¡è°ƒç”¨Â <code>next()</code>Â éƒ½ä¼šæ‰§è¡Œåˆ°ä¸‹ä¸€ä¸ªÂ <code>yield</code>Â è¡¨è¾¾å¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«Â <code>value</code>Â å’ŒÂ <code>done</code>Â å±æ€§çš„å¯¹è±¡ï¼Œå…¶ä¸­Â <code>value</code>Â è¡¨ç¤ºè¿”å›çš„å€¼ï¼Œ<code>done</code>Â è¡¨ç¤ºæ˜¯å¦å®Œæˆæ‰€æœ‰è¿­ä»£ã€‚</p>
<p><code>yield</code>Â ****è¡¨è¾¾å¼æ˜¯æš‚åœã€æ¢å¤æ‰§è¡Œçš„å…³é”®ã€‚åœ¨ç”Ÿæˆå™¨å‡½æ•°ä½“å†…ï¼Œä½¿ç”¨Â <code>yield</code>Â è¡¨è¾¾å¼æ¥æš‚åœå‡½æ•°çš„æ‰§è¡Œï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼åˆ°ç”Ÿæˆå™¨å¤–éƒ¨ã€‚å½“å¤–éƒ¨ä»£ç å†æ¬¡è°ƒç”¨ç”Ÿæˆå™¨çš„Â <code>next()</code>Â æ–¹æ³•æ—¶ï¼Œç”Ÿæˆå™¨å‡½æ•°ä¼šä»ä¸Šæ¬¡æš‚åœçš„åœ°æ–¹ç»§ç»­æ‰§è¡Œã€‚</p>
<p>è¯­æ³•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œå¯ä»¥çœ‹çœ‹ä»¥ä¸‹ç¤ºèŒƒï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span>* <span class="title function_">numberGen3erator</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">1</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">yield</span> <span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> gen = <span class="title function_">numberGenerator</span>(); <span class="comment">// è°ƒç”¨ç”Ÿæˆå™¨å‡½æ•°åˆ›å»ºç”Ÿæˆå™¨å¯¹è±¡</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 1</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 2</span></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(gen.<span class="title function_">next</span>().<span class="property">value</span>); <span class="comment">// 3</span></span><br></pre></td></tr></table></figure>

<p>çœ‹åˆ°è¿™è¯­æ³•ç»“æ„ï¼Œä½ å¯èƒ½ä¼šæ„Ÿåˆ°ç†Ÿæ‚‰ï¼Œç¨åå†è¯´ã€‚</p>
<h3 id="co"><a href="#co" class="headerlink" title="co"></a>co</h3><p>æ—¢ç„¶ä»‹ç» <code>generator</code> å’Œ <code>async</code> çš„å…³ç³»ï¼Œé‚£å°±è¦è¯´åˆ° <code>co</code>ã€‚</p>
<p><code>co</code>Â åº“æ˜¯ä¸€ä¸ªç”¨äº Node.js å’Œæµè§ˆå™¨çš„ JavaScript åº“ï¼Œç”± TJ Holowaychuk å¼€å‘ã€‚å®ƒåŸºäº <code>generator</code> æ¥æ§åˆ¶å¼‚æ­¥æµç¨‹ï¼Œå…è®¸å¼€å‘è€…ä»¥ä¸€ç§çœ‹èµ·æ¥å‡ ä¹åƒåŒæ­¥ä»£ç çš„æ–¹å¼æ¥ç¼–å†™éé˜»å¡çš„å¼‚æ­¥ä»£ç ã€‚<code>co</code>Â åº“çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯è‡ªåŠ¨æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°ï¼Œå¤„ç†Â <code>yield</code>Â å…³é”®å­—åé¢è·Ÿéšçš„ä»»ä½•Â <code>Promise</code>Â å¯¹è±¡ï¼Œå¹¶åœ¨Â <code>Promise</code>Â è§£å†³åç»§ç»­æ‰§è¡Œç”Ÿæˆå™¨å‡½æ•°ã€‚</p>
<ul>
<li><strong><code>co</code></strong>Â åº“å¯ä»¥å°†ç”Ÿæˆå™¨å‡½æ•°è½¬æ¢ä¸ºè¿”å›Â <strong><code>Promise</code></strong>Â å¯¹è±¡çš„å‡½æ•°ã€‚</li>
<li>å®ƒæ”¯æŒÂ <strong><code>yield</code></strong>Â å…³é”®å­—åé¢è·Ÿéšçš„Â <strong><code>Promise</code></strong>Â å¯¹è±¡ã€Thunk å‡½æ•°ã€æ•°ç»„ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰ã€å¯¹è±¡ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰ã€ç”Ÿæˆå™¨å’Œç”Ÿæˆå™¨å‡½æ•°ï¼ˆå§”æ‰˜ï¼‰ã€‚</li>
<li><strong><code>co</code></strong>Â åº“çš„ä½¿ç”¨å‰ææ˜¯ç”Ÿæˆå™¨å‡½æ•°çš„Â <strong><code>yield</code></strong>Â å‘½ä»¤åé¢åªèƒ½æ˜¯ Thunk å‡½æ•°æˆ–Â <strong><code>Promise</code></strong>Â å¯¹è±¡ã€‚</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> co = <span class="built_in">require</span>(<span class="string">&#x27;co&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="title function_">co</span>(<span class="keyword">function</span>* () &#123;</span><br><span class="line">  <span class="keyword">var</span> result = <span class="keyword">yield</span> <span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="literal">true</span>);</span><br><span class="line">  <span class="keyword">return</span> result;</span><br><span class="line">&#125;).<span class="title function_">then</span>(<span class="keyword">function</span> (<span class="params">value</span>) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(value); <span class="comment">// true</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œ<code>co</code>Â å‡½æ•°æ¥å—ä¸€ä¸ª <code>generator</code> ä½œä¸ºå‚æ•°ï¼Œå¹¶è¿”å›ä¸€ä¸ªÂ <code>Promise</code>Â å¯¹è±¡ã€‚ç”Ÿæˆå™¨å‡½æ•°å†…éƒ¨é€šè¿‡Â <code>yield</code>Â æš‚åœæ‰§è¡Œï¼Œç­‰å¾…Â <code>Promise</code>Â è§£å†³ï¼Œç„¶åÂ <code>co</code>Â åº“ä¼šè‡ªåŠ¨æ¢å¤æ‰§è¡Œã€‚</p>
<h3 id="å¯¹æ¯”"><a href="#å¯¹æ¯”" class="headerlink" title="å¯¹æ¯”"></a>å¯¹æ¯”</h3><p>æœ‰äº†å‰é¢çš„é“ºå«ï¼Œè¿™é‡Œåšä¸ªå¯¹æ¯”ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// async/await</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;some-url&#x27;</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// generator + co</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="title function_">co</span>(<span class="keyword">function</span>* () &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="keyword">yield</span> <span class="title function_">fetch</span>(<span class="string">&#x27;some-url&#x27;</span>);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(data);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸€ç›®äº†ç„¶ï¼Œåœ¨è¯­æ³•ç»“æ„å±‚é¢ï¼Œä½ åªéœ€è¦å»é™¤ <code>co</code>ï¼Œç„¶åå°† <code>*</code> æ›¿æ¢ä¸º <code>async</code>ï¼Œ<code>yield</code> æ›¿æ¢ä¸º <code>await</code> å³å¯ã€‚æ—¢ç„¶ <code>async</code> æ˜¯å¯¹ <code>generator</code> çš„å°è£…ï¼Œé‚£è‚¯å®šåšäº†ä¸€äº›ä¼˜åŒ–ï¼Œä¸»è¦ä½“ç°åœ¨ä»¥ä¸‹å››ç‚¹ï¼š</p>
<ol>
<li>å†…ç½®æ‰§è¡Œå™¨ï¼Œæ— éœ€ä½¿ç”¨é¢å¤–çš„ <code>co</code> åº“ï¼Œä¹Ÿä¸éœ€è¦æ‰‹åŠ¨æŒ‡å®š <code>.next()</code>ï¼›</li>
<li>è¯­ä¹‰æ€§å¥½ï¼Œä»£ç æ›´ç®€æ´ï¼›</li>
<li>é€‚ç”¨æ€§å¹¿æ³›ï¼Œ<code>await</code>å‘½ä»¤åé¢ï¼Œå¯ä»¥æ˜¯ Promise å¯¹è±¡å’ŒåŸå§‹ç±»å‹çš„å€¼ï¼Œæ²¡æœ‰äº† <code>yield</code> çš„é™åˆ¶ï¼›</li>
<li>è¿”å›å€¼ä¸º Promiseï¼Œå¯ä»¥ä½¿ç”¨ <code>.then</code> ç­‰è¯­æ³•ï¼Œæ›´æ–¹ä¾¿ã€‚</li>
</ol>
<blockquote>
<p><code>async</code> å‡½æ•°å®Œå…¨å¯ä»¥çœ‹ä½œå¤šä¸ªå¼‚æ­¥æ“ä½œï¼ŒåŒ…è£…æˆçš„ä¸€ä¸ª Promise å¯¹è±¡ï¼Œè€Œ <code>await</code> å‘½ä»¤å°±æ˜¯å†…éƒ¨ <code>then</code> å‘½ä»¤çš„è¯­æ³•ç³–ã€‚</p>
</blockquote>
<h2 id="ä½¿ç”¨"><a href="#ä½¿ç”¨" class="headerlink" title="ä½¿ç”¨"></a>ä½¿ç”¨</h2><h3 id="async-è¯­æ³•"><a href="#async-è¯­æ³•" class="headerlink" title="async è¯­æ³•"></a>async è¯­æ³•</h3><p>ä½¿ç”¨Â <code>async</code>Â å…³é”®å­—å¯ä»¥å£°æ˜ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼ˆasync functionï¼‰ï¼Œè¿™ç§å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªÂ <code>Promise</code>Â å¯¹è±¡ã€‚å¦‚æœå‡½æ•°ä½“å†…æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿™ä¸ªå€¼ä¼šè¢«Â <code>Promise.resolve()</code>Â åŒ…è£…ã€‚å¦‚æœå‡½æ•°æŠ›å‡ºé”™è¯¯ï¼Œåˆ™ä¼šè¢«Â <code>Promise.reject()</code>Â åŒ…è£…ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&quot;Hello, World!&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">f</span>().<span class="title function_">then</span>(alert); <span class="comment">// &quot;Hello, World!&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="await-è¯­æ³•"><a href="#await-è¯­æ³•" class="headerlink" title="await è¯­æ³•"></a>await è¯­æ³•</h3><p><code>await</code>Â å…³é”®å­—ç”¨äºç­‰å¾…ä¸€ä¸ªÂ <code>Promise</code>Â å®Œæˆï¼ˆfulfilledï¼‰æˆ–æ‹’ç»ï¼ˆrejectedï¼‰ã€‚å®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•°å†…éƒ¨ä½¿ç”¨ã€‚å½“Â <code>await</code>Â è¡¨è¾¾å¼æš‚åœæ‰§è¡Œå¼‚æ­¥å‡½æ•°æ—¶ï¼Œå®ƒä¼šç­‰å¾…Â <code>Promise</code>Â è§£å†³ï¼Œç„¶åæ¢å¤å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œå¹¶è¿”å›è§£å†³çš„å€¼ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">f3</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">let</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="title function_">resolve</span>(<span class="string">&quot;å®Œæˆ!&quot;</span>), <span class="number">1000</span>)</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> result = <span class="keyword">await</span> promise; <span class="comment">// ç­‰å¾…ç›´åˆ° promise è§£å†³ (*)</span></span><br><span class="line"></span><br><span class="line">  <span class="title function_">alert</span>(result); <span class="comment">// &quot;å®Œæˆ!&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="é”™è¯¯å¤„ç†"><a href="#é”™è¯¯å¤„ç†" class="headerlink" title="é”™è¯¯å¤„ç†"></a>é”™è¯¯å¤„ç†</h3><p><code>async</code> å¼‚æ­¥ç¼–ç¨‹é”™è¯¯å¤„ç†çš„å§¿åŠ¿æ¯”è¾ƒå¤šï¼Œæ¯”è¾ƒæ¨èçš„æ˜¯è€è€å®å®ä½¿ç”¨ <code>try...catch...</code>ï¼Œè™½ç„¶è¿™å¯èƒ½é€ æˆæœ‰äº›æƒ…å†µä¸‹éš¾ä»¥æ‰¾åˆ°å…·ä½“é”™è¯¯ä»£ç ï¼ˆæ¯”å¦‚ <code>await</code> è¢«åµŒå¥—åœ¨å…¶ä»–æ“ä½œä¸­ï¼‰ã€‚</p>
<p>å¦ä¸€ç§æ–¹æ¡ˆæ˜¯åœ¨ <code>await</code> ä¹‹åä½¿ç”¨ <code>catch()</code> å—æ•è·é”™è¯¯ï¼Œä¹Ÿå¯ä»¥ï¼Œä½†ä¼šé€ æˆä»£ç é£æ ¼ä¸Šçš„å†²çªã€‚</p>
<p>æ­¤å¤–ï¼Œè¿˜æœ‰ä¸€ç§æœ‰è¶£çš„ Golang ä»£ç é£æ ¼çš„é”™è¯¯å¤„ç†æ–¹å¼ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å‡½æ•°æ¥æ¨¡æ‹Ÿè¿™ç§è¡Œä¸ºï¼Œè¿™ä¸ªå‡½æ•°æ¥å—ä¸€ä¸ªÂ <strong><code>Promise</code></strong>Â å¹¶è¿”å›ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå€¼çš„æ•°ç»„ï¼šä¸€ä¸ªé”™è¯¯å’Œä¸€ä¸ªç»“æœï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨æ•°ç»„è§£æ„æ¥åŒæ—¶è·å–é”™è¯¯å’Œç»“æœï¼Œè€Œä¸éœ€è¦ä½¿ç”¨Â <strong><code>try...catch...</code></strong>Â å—ã€‚è¿™ç§æ–¹æ³•ä½¿å¾—é”™è¯¯å¤„ç†æ›´åŠ æ˜¾å¼ã€‚</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®ç°è¿™ç§é”™è¯¯å¤„ç†çš„ç¤ºèŒƒï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#x27;to&#x27; å‡½æ•°ç”¨äºè½¬æ¢ Promiseï¼Œä»¥ä¾¿å®ƒè¿”å›ä¸€ä¸ªåŒ…å«é”™è¯¯å’Œç»“æœçš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">to</span>(<span class="params">promise</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> promise</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> [<span class="literal">null</span>, data])</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">err</span> =&gt;</span> [err]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¼‚æ­¥å‡½æ•°ä½¿ç”¨ &#x27;to&#x27; å‡½æ•°å’Œ &#x27;await&#x27; æ¥å¤„ç† fetch è¯·æ±‚</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchUrl</span>(<span class="params">url</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> [err, response] = <span class="keyword">await</span> <span class="title function_">to</span>(<span class="title function_">fetch</span>(url));</span><br><span class="line">  <span class="keyword">if</span> (err) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Fetch error:&#x27;</span>, err);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> [parseErr, data] = <span class="keyword">await</span> <span class="title function_">to</span>(response.<span class="title function_">json</span>());</span><br><span class="line">  <span class="keyword">if</span> (parseErr) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;JSON parsing error:&#x27;</span>, parseErr);</span><br><span class="line">    <span class="keyword">return</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Fetched data:&#x27;</span>, data);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ç¤ºèŒƒ"><a href="#ç¤ºèŒƒ" class="headerlink" title="ç¤ºèŒƒ"></a>ç¤ºèŒƒ</h3><p>æ¨¡æ‹Ÿç”¨æˆ·ç™»å½•æµç¨‹ï¼Œæµç¨‹çœ‹æ³¨é‡Šï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªç”¨äºè¯·æ±‚ç”¨æˆ·æ•°æ®çš„å‡½æ•°</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getUser</span>(<span class="params">username</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (username === <span class="string">&#x27;Alice&#x27;</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(&#123; <span class="attr">id</span>: <span class="number">1</span>, <span class="attr">username</span>: <span class="string">&#x27;Alice&#x27;</span>, <span class="attr">verified</span>: <span class="literal">true</span> &#125;);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç”¨æˆ·ä¸å­˜åœ¨&#x27;</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‡è®¾æˆ‘ä»¬æœ‰å¦ä¸€ä¸ªå‡½æ•°ç”¨äºéªŒè¯ç”¨æˆ·</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">verifyUser</span>(<span class="params">user</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="keyword">if</span> (user.<span class="property">verified</span>) &#123;</span><br><span class="line">        <span class="title function_">resolve</span>(<span class="string">&#x27;ç”¨æˆ·éªŒè¯æˆåŠŸ&#x27;</span>);</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="title function_">reject</span>(<span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;ç”¨æˆ·éªŒè¯å¤±è´¥&#x27;</span>));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;, <span class="number">1000</span>);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ async/await å’Œ .then().catch() ç»“åˆå¤„ç†ç™»å½•æµç¨‹</span></span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loginUser</span>(<span class="params">username</span>) &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ await ç­‰å¾… getUser å‡½æ•°è§£å†³</span></span><br><span class="line">    <span class="keyword">const</span> user = <span class="keyword">await</span> <span class="title function_">getUser</span>(username);</span><br><span class="line">    <span class="comment">// ä½¿ç”¨ await ç­‰å¾… verifyUser å‡½æ•°è§£å†³</span></span><br><span class="line">    <span class="keyword">const</span> verificationStatus = <span class="keyword">await</span> <span class="title function_">verifyUser</span>(user);</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(verificationStatus);</span><br><span class="line">  &#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">    <span class="comment">// å¤„ç†ä»»ä½•åœ¨ getUser æˆ– verifyUser ä¸­æŠ›å‡ºçš„é”™è¯¯</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(error.<span class="property">message</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è°ƒç”¨ loginUser å‡½æ•°ï¼Œå¹¶ä½¿ç”¨ .then().catch() å¤„ç†æœ€ç»ˆç»“æœ</span></span><br><span class="line"><span class="title function_">loginUser</span>(<span class="string">&#x27;Alice&#x27;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;ç™»å½•æµç¨‹å®Œæˆ&#x27;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">error</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;ç™»å½•æµç¨‹ä¸­å‘ç”Ÿé”™è¯¯:&#x27;</span>, error.<span class="property">message</span>);</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>

<p>å®é™…å¤„ç†å¼‚æ­¥æ“ä½œå°±å¥—ç”¨è¿™ä¸ª comboã€‚æ­¤å¤–è¿˜æœ‰ä¸€äº›ä½¿ç”¨æ—¶çš„æ³¨æ„ç‚¹ï¼Œè¿™é‡Œä¹Ÿåšè¡¥å……ï¼š</p>
<ol>
<li>å¤šä¸ª <code>await</code> ä¹‹é—´å¦‚æœä¸å­˜åœ¨ç»§å‘å…³ç³»ï¼Œç”¨ <code>Promise.all()</code> ç»Ÿä¸€å¤„ç†ï¼Œé¿å…é¢å¤–è€—æ—¶ï¼›</li>
<li><code>async</code> å‡½æ•°ä¿ç•™è¿è¡Œæ ˆã€‚</li>
</ol>
<p>æœ€åä¸€æ¡ç‰¹æ€§éœ€è¦ä¸ªå°ä¾‹å­æ¥è§£é‡Šï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// b() æ‰§è¡Œæ—¶ a() åŒæ­¥æ‰§è¡Œï¼Œè‹¥ b() or c() æŠ¥é”™ï¼Œé”™è¯¯å †æ ˆå¯èƒ½ä¸åŒ…æ‹¬ a()</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">a</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="title function_">b</span>().<span class="title function_">then</span>(<span class="function">() =&gt;</span> <span class="title function_">c</span>());</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// b() æ‰§è¡Œæ—¶ a() æš‚åœæ‰§è¡Œï¼Œä¸Šä¸‹æ–‡ä¿ç•™ï¼Œb() or c() æŠ¥é”™ï¼Œé”™è¯¯å †æ ˆä¸€å®šåŒ…æ‹¬ a()</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">a</span> = <span class="keyword">async</span> (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">b</span>();</span><br><span class="line">  <span class="title function_">c</span>();</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="å®ä¾‹ï¼šé¡ºåºå®Œæˆå¼‚æ­¥åŠ è½½"><a href="#å®ä¾‹ï¼šé¡ºåºå®Œæˆå¼‚æ­¥åŠ è½½" class="headerlink" title="å®ä¾‹ï¼šé¡ºåºå®Œæˆå¼‚æ­¥åŠ è½½"></a>å®ä¾‹ï¼šé¡ºåºå®Œæˆå¼‚æ­¥åŠ è½½</h3><p><code>async</code> å†…éƒ¨çš„å¤šä¸ª <code>await</code> ä½¿ç»§å‘æ‰§è¡Œçš„ï¼Œå¦‚æœè¿™äº›å¼‚æ­¥æ“ä½œæ²¡æœ‰ç›¸äº’ä¾èµ–ï¼Œè¿™ç§ç‰¹æ€§ä¼šé™ä½è¿è¡Œæ•ˆç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹ä»£ç å¹¶å‘å‘å‡ºè¯·æ±‚ï¼Œç„¶åé¡ºåºè·å¾—ç»“æœï¼š</p>
<blockquote>
<p>ä»£ç æ¡ˆä¾‹æ¥è‡ªé˜…è¯»æ–‡æ¡£1</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">logInOrder</span>(<span class="params">urls</span>) &#123;</span><br><span class="line">  <span class="comment">// å¹¶å‘è¯»å–è¿œç¨‹URL</span></span><br><span class="line">  <span class="keyword">const</span> textPromises = urls.<span class="title function_">map</span>(<span class="keyword">async</span> url =&gt; &#123;</span><br><span class="line">    <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">    <span class="keyword">return</span> response.<span class="title function_">text</span>();</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æŒ‰æ¬¡åºè¾“å‡º</span></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> textPromise <span class="keyword">of</span> textPromises) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="keyword">await</span> textPromise);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="é¡¶å±‚-await"><a href="#é¡¶å±‚-await" class="headerlink" title="é¡¶å±‚ await"></a>é¡¶å±‚ await</h2><p>é™¤äº†åœ¨ <code>async</code> ä»£ç å—ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨æ¨¡å—çš„é¡¶å±‚ä»£ç ä¸­ä½¿ç”¨Â <strong><code>await</code></strong>Â å…³é”®å­—ã€‚</p>
<p>å½“æ¨¡å—éœ€è¦åœ¨æ‰§è¡Œä»»ä½•å…¶ä»–ä»£ç ä¹‹å‰å®ŒæˆæŸäº›å¼‚æ­¥æ“ä½œï¼Œå¦‚æ•°æ®åŠ è½½ã€èµ„æºé…ç½®ç­‰ï¼Œæˆ–è€…å½“ä¸€ä¸ªæ¨¡å—ä¾èµ–äºå¦ä¸€ä¸ªå¼‚æ­¥è§£æçš„æ¨¡å—æ—¶ï¼Œå¯ä»¥ä½¿ç”¨é¡¶å±‚Â <strong><code>await</code></strong>Â ç¡®ä¿æ‰€æœ‰ä¾èµ–éƒ½å·²æ­£ç¡®åŠ è½½ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">loadConfig</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> response = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;/config.json&#x27;</span>);</span><br><span class="line">  <span class="keyword">if</span> (!response.<span class="property">ok</span>) &#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&#x27;é…ç½®åŠ è½½å¤±è´¥&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> response.<span class="title function_">json</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; loadConfig &#125; <span class="keyword">from</span> <span class="string">&#x27;./config.js&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> config;</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">	<span class="comment">// ä½¿ç”¨é¡¶å±‚ await ç¡®ä¿é…ç½®åœ¨ç»§ç»­ä¹‹å‰è¢«åŠ è½½</span></span><br><span class="line">  config = <span class="keyword">await</span> <span class="title function_">loadConfig</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (error) &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;æ— æ³•åŠ è½½é…ç½®:&#x27;</span>, error);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">applyConfig</span>(config);</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å†™æ³•æœ‰ä¸ªæ˜¾è€Œæ˜“è§çš„å¥½å¤„â€”â€”æˆ‘ä»¬ä¸éœ€è¦åœ¨ä¸»ç¨‹åºä¸­å†é¢å¤–åŒ…è£¹ä¸€å±‚ <code>async</code>ï¼Œè€Œä¸”è™½ç„¶æ“ä½œæ˜¯å¼‚æ­¥çš„ï¼Œä½†é¡¶å±‚Â <strong><code>await</code></strong>Â ä½¿å¾—ä»£ç çš„è¯»å†™æ›´åƒæ˜¯åŒæ­¥æ“ä½œï¼Œæ˜“äºç†è§£å’Œç»´æŠ¤ã€‚</p>
<p>åŒæ—¶ï¼Œè¿™ç§å†™æ³•ä¹Ÿç¡®ä¿äº†æœåŠ¡çš„å¯é æ€§ã€‚å¦‚æœå¼€å‘è€…å•çº¯å†™ä¸€ä¸ªè„šæœ¬ï¼Œç„¶ååœ¨ä¸»æ¨¡å—ä¸­åŒæ­¥åŠ è½½è¿™ä¸ªè„šæœ¬ï¼Œåˆ™å¾ˆéš¾æ§åˆ¶å¼‚æ­¥æ“ä½œçš„ç»“æœï¼Œå› ä¸ºä¸»æ¨¡å—æ²¡æ³•æ§åˆ¶å¼‚æ­¥æ“ä½œæ˜¯å¦å®Œæˆï¼Œä»¥ä¸‹é¢çš„ä»£ç ä¸ºä¾‹ï¼Œusage.js æ— æ³•ç¡®ä¿è‡ªå·±è·å¾—äº†ä¸€ä¸ªåˆç†çš„ output è¿˜æ˜¯ä¸€ä¸ª <code>undefined</code>ã€‚</p>
<blockquote>
<p>ä»£ç æ¡ˆä¾‹æ¥è‡ªé˜…è¯»æ–‡æ¡£1</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// awaiting.js</span></span><br><span class="line"><span class="keyword">let</span> output;</span><br><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dynamic = <span class="keyword">await</span> <span class="keyword">import</span>(someMission);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">  output = <span class="title function_">someProcess</span>(dynamic.<span class="property">default</span>, data);</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">main</span>();</span><br><span class="line"><span class="keyword">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// usage.js</span></span><br><span class="line"><span class="keyword">import</span> &#123; output &#125; <span class="keyword">from</span> <span class="string">&quot;./awaiting.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outputPlusValue</span>(<span class="params">value</span>) &#123; <span class="keyword">return</span> output + value &#125;</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>));</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>)), <span class="number">1000</span>);</span><br></pre></td></tr></table></figure>

<p>æ—§ç‰ˆçš„è§£å†³æ–¹æ³•æ˜¯è®© awaiting.js è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ª Promise å¯¹è±¡åˆ¤æ–­å¼‚æ­¥æ“ä½œæ˜¯å¦ç»“æŸã€‚</p>
<blockquote>
<p>ä»£ç æ¡ˆä¾‹æ¥è‡ªé˜…è¯»æ–‡æ¡£1</p>
</blockquote>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// awaiting.js</span></span><br><span class="line"><span class="keyword">let</span> output;</span><br><span class="line"><span class="keyword">export</span> <span class="title function_">default</span> (<span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">main</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> dynamic = <span class="keyword">await</span> <span class="keyword">import</span>(someMission);</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(url);</span><br><span class="line">  output = <span class="title function_">someProcess</span>(dynamic.<span class="property">default</span>, data);</span><br><span class="line">&#125;)();</span><br><span class="line"><span class="keyword">export</span> &#123; output &#125;;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// usage.js</span></span><br><span class="line"><span class="keyword">import</span> promise, &#123; output &#125; <span class="keyword">from</span> <span class="string">&quot;./awaiting.js&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">outputPlusValue</span>(<span class="params">value</span>) &#123; <span class="keyword">return</span> output + value &#125;</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>));</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title function_">outputPlusValue</span>(<span class="number">100</span>)), <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>è¿™ç§å†™æ³•è™½ç„¶ä¿è¯äº†æ•°æ®çš„å¯é æ€§ï¼Œä½†ä½¿ä»£ç å˜å¾—è‡ƒè‚¿ï¼Œå¼€å‘è€…å¿…éœ€æ—¶åˆ»è®°å¾—åœ¨è°ƒç”¨è¿™ä¸ªå­æ¨¡å—æ—¶è¦ä½¿ç”¨ Promise åŠ è½½ï¼Œå¹¶ä¸”æ‰€æœ‰ä¾èµ–è¿™ä¸ªå­æ¨¡å—çš„æ¨¡å—éƒ½éœ€è¦ä½¿ç”¨ Promise åŠ è½½ï¼Œä¸€å±‚å±‚åœ°å¥—å›å»äº†ã€‚è€Œé¡¶å±‚ await å°±ç›´æ¥è§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚</p>
<h2 id="å°å‘"><a href="#å°å‘" class="headerlink" title="å°å‘"></a>å°å‘</h2><h3 id="æ··ç”¨-await-å’Œ-then"><a href="#æ··ç”¨-await-å’Œ-then" class="headerlink" title="æ··ç”¨ await å’Œ .then()"></a>æ··ç”¨ <code>await</code> å’Œ <code>.then()</code></h3><p>è¿™æ˜¯ä¸€ç§ä¸è¢«æ¨èçš„åšæ³•ã€‚</p>
<p>å¦‚æœä½ åœ¨ä¸€ä¸ªÂ <strong><code>async</code></strong>Â å‡½æ•°ä¸­ä½¿ç”¨Â **<code>await</code>**ï¼Œç„¶ååœ¨åŒä¸€ä¸ªÂ <strong><code>await</code></strong>Â è°ƒç”¨åé¢ç´§æ¥ç€ä½¿ç”¨Â **<code>.then()</code>**ï¼Œè¿™å¯èƒ½ä¼šè®©äººå›°æƒ‘ï¼Œå› ä¸ºå®ƒæ··åˆäº†ä¸¤ç§ä¸åŒçš„é£æ ¼ï¼Œä½¿ä»£ç çš„æ„å›¾ä¸å¤Ÿæ¸…æ™°ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">fetchData</span>(<span class="params"></span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> data = <span class="keyword">await</span> <span class="title function_">fetch</span>(<span class="string">&#x27;some-api-url&#x27;</span>)</span><br><span class="line">    .<span class="title function_">then</span>(<span class="function"><span class="params">response</span> =&gt;</span> response.<span class="title function_">json</span>())</span><br><span class="line">    .<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Error:&#x27;</span>, error));</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸šåŠ¡é€»è¾‘æ˜ç¡®çš„è¯ï¼Œä»£ç ä¸ä¼šç»™ä½ ä¸€æ‹³ï¼Œä½†å…¶ä»–å¼€å‘è€…ä¼šç»™ä½ ä¸€æ‹³ã€‚</p>
<h2 id="é˜…è¯»æ–‡æ¡£"><a href="#é˜…è¯»æ–‡æ¡£" class="headerlink" title="é˜…è¯»æ–‡æ¡£"></a>é˜…è¯»æ–‡æ¡£</h2><ol>
<li><a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/#docs/async">https://es6.ruanyifeng.com/#docs/async</a></li>
<li><a target="_blank" rel="noopener" href="https://www.cnblogs.com/porter/p/13343524.html">https://www.cnblogs.com/porter/p/13343524.html</a></li>
</ol>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">ğŸ“„é¦–é¡µ</a></li>
        
          <li><a href="/archives/">ğŸ“‚å½’æ¡£</a></li>
        
          <li><a href="/friends/">ğŸ‘«å‹é“¾</a></li>
        
          <li><a href="/categories/">ğŸ—‚ï¸åˆ†ç±»</a></li>
        
          <li><a href="/tags/">ğŸ·ï¸æ ‡ç­¾</a></li>
        
          <li><a href="/about/">ğŸŒ¸å…³äº</a></li>
        
          <li><a href="/log/">ğŸ“–æ—¥å¿—</a></li>
        
          <li><a href="/search/">ğŸ”æœç´¢</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Generator"><span class="toc-number">1.</span> <span class="toc-text">Generator</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.1.</span> <span class="toc-text">è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#co"><span class="toc-number">1.2.</span> <span class="toc-text">co</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%AF%94"><span class="toc-number">1.3.</span> <span class="toc-text">å¯¹æ¯”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">ä½¿ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#async-%E8%AF%AD%E6%B3%95"><span class="toc-number">2.1.</span> <span class="toc-text">async è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#await-%E8%AF%AD%E6%B3%95"><span class="toc-number">2.2.</span> <span class="toc-text">await è¯­æ³•</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E5%A4%84%E7%90%86"><span class="toc-number">2.3.</span> <span class="toc-text">é”™è¯¯å¤„ç†</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E8%8C%83"><span class="toc-number">2.4.</span> <span class="toc-text">ç¤ºèŒƒ</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%EF%BC%9A%E9%A1%BA%E5%BA%8F%E5%AE%8C%E6%88%90%E5%BC%82%E6%AD%A5%E5%8A%A0%E8%BD%BD"><span class="toc-number">2.5.</span> <span class="toc-text">å®ä¾‹ï¼šé¡ºåºå®Œæˆå¼‚æ­¥åŠ è½½</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B6%E5%B1%82-await"><span class="toc-number">3.</span> <span class="toc-text">é¡¶å±‚ await</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B0%8F%E5%9D%91"><span class="toc-number">4.</span> <span class="toc-text">å°å‘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B7%B7%E7%94%A8-await-%E5%92%8C-then"><span class="toc-number">4.1.</span> <span class="toc-text">æ··ç”¨ await å’Œ .then()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%85%E8%AF%BB%E6%96%87%E6%A1%A3"><span class="toc-number">5.</span> <span class="toc-text">é˜…è¯»æ–‡æ¡£</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://blog.kinoko.fun/2024/06/03/async-await/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://blog.kinoko.fun/2024/06/03/async-await/&text=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://blog.kinoko.fun/2024/06/03/async-await/&is_video=false&description=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=æµç•…åœ°ä½¿ç”¨ async/await&body=Check out this article: https://blog.kinoko.fun/2024/06/03/async-await/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://blog.kinoko.fun/2024/06/03/async-await/&title=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://blog.kinoko.fun/2024/06/03/async-await/&name=æµç•…åœ°ä½¿ç”¨ async/await&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://blog.kinoko.fun/2024/06/03/async-await/&t=æµç•…åœ°ä½¿ç”¨ async/await"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    <div class="footer-cnrecord">
      <img id="gongan" alt class="gongan-logo"
          src="/images/gongan.png" />
      æµ™ICPå¤‡2023028448å·-2
    </div>
    <div class="footer-copyright">
      Copyright &copy;
      
      
      2022-2025
      é˜¿è‡kinoko
    </div>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">ğŸ“„é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">ğŸ“‚å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">ğŸ‘«å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/categories/">ğŸ—‚ï¸åˆ†ç±»</a></li><!--
     --><!--
       --><li><a href="/tags/">ğŸ·ï¸æ ‡ç­¾</a></li><!--
     --><!--
       --><li><a href="/about/">ğŸŒ¸å…³äº</a></li><!--
     --><!--
       --><li><a href="/log/">ğŸ“–æ—¥å¿—</a></li><!--
     --><!--
       --><li><a href="/search/">ğŸ”æœç´¢</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿ï¼\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸï¼");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
