<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5" />
    <meta name="description" content="Promise è§„èŒƒæœ€æ—©ç”± CommonJS ç¤¾åŒºæå‡ºï¼Œåæ¥æˆä¸º ES2015ï¼ˆES6ï¼‰ è¯­è¨€è§„èŒƒï¼Œåˆ°ç°åœ¨å¯ä»¥è¯´å·²ç»æˆäº†å¼‚æ­¥ç¼–ç¨‹çš„é¦–é€‰æ–¹æ¡ˆã€‚ ä½¿ç”¨ Promise - JavaScript | MDN Promise çŠ¶æ€ Penfing  ç­‰å¾… Fulfilled æˆåŠŸ rejected å¤±è´¥  æ„é€ å‡½æ•° Promise(excutor)Promise æ„é€ å‡½æ•°æ˜¯ JavaScript ä¸­ç”¨äºå¤„">
<meta property="og:type" content="article">
<meta property="og:title" content="Promiseä½¿ç”¨ä¸€è§ˆ">
<meta property="og:url" content="https://blog.kinoko.fun/2024/06/17/promise/index.html">
<meta property="og:site_name" content="é˜¿è‡ã®åšå®¢">
<meta property="og:description" content="Promise è§„èŒƒæœ€æ—©ç”± CommonJS ç¤¾åŒºæå‡ºï¼Œåæ¥æˆä¸º ES2015ï¼ˆES6ï¼‰ è¯­è¨€è§„èŒƒï¼Œåˆ°ç°åœ¨å¯ä»¥è¯´å·²ç»æˆäº†å¼‚æ­¥ç¼–ç¨‹çš„é¦–é€‰æ–¹æ¡ˆã€‚ ä½¿ç”¨ Promise - JavaScript | MDN Promise çŠ¶æ€ Penfing  ç­‰å¾… Fulfilled æˆåŠŸ rejected å¤±è´¥  æ„é€ å‡½æ•° Promise(excutor)Promise æ„é€ å‡½æ•°æ˜¯ JavaScript ä¸­ç”¨äºå¤„">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img.ma5hr00m.top/blog/20240609140952.png">
<meta property="article:published_time" content="2024-06-16T16:00:00.000Z">
<meta property="article:modified_time" content="2025-01-02T07:21:22.228Z">
<meta property="article:author" content="é˜¿è‡kinoko">
<meta property="article:tag" content="ma5hr00m,kinoko,é˜¿è‡kinoko,blog,åšå®¢,åšæ–‡">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img.ma5hr00m.top/blog/20240609140952.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Promiseä½¿ç”¨ä¸€è§ˆ</title>
    <!-- async scripts -->
    <!-- Google Analytics -->


    <!-- Umami Analytics -->


    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
    <!-- rss -->
    
    
      <link rel="alternate" href="/true" title="é˜¿è‡ã®åšå®¢" type="application/atom+xml" />
    
	<!-- mathjax -->
	
<meta name="generator" content="Hexo 7.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="ç›®å½•"><i class="fa-solid fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" aria-label="é¡¶éƒ¨" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa-solid fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
        <!--
       --><li><a href="/">ğŸ“„é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">ğŸ“‚å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">ğŸ‘«å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/categories/">ğŸ—‚ï¸åˆ†ç±»</a></li><!--
     --><!--
       --><li><a href="/tags/">ğŸ·ï¸æ ‡ç­¾</a></li><!--
     --><!--
       --><li><a href="/about/">ğŸŒ¸å…³äº</a></li><!--
     --><!--
       --><li><a href="/log/">ğŸ“–æ—¥å¿—</a></li><!--
     --><!--
       --><li><a href="/search/">ğŸ”æœç´¢</a></li><!--
     -->
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" aria-label="ä¸Šä¸€ç¯‡" href="/2024/06/20/how-does-clash-work/"><i class="fa-solid fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" aria-label="ä¸‹ä¸€ç¯‡" href="/2024/06/10/glcm/"><i class="fa-solid fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" aria-label="è¿”å›é¡¶éƒ¨" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" aria-label="åˆ†äº«æ–‡ç« " href="#"><i class="fa-solid fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">ä¸Šä¸€ç¯‡</span>
      <span id="i-next" class="info" style="display:none;">ä¸‹ä¸€ç¯‡</span>
      <span id="i-top" class="info" style="display:none;">è¿”å›é¡¶éƒ¨</span>
      <span id="i-share" class="info" style="display:none;">åˆ†äº«æ–‡ç« </span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://blog.kinoko.fun/2024/06/17/promise/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://blog.kinoko.fun/2024/06/17/promise/&text=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://blog.kinoko.fun/2024/06/17/promise/&is_video=false&description=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Promiseä½¿ç”¨ä¸€è§ˆ&body=Check out this article: https://blog.kinoko.fun/2024/06/17/promise/"><i class="fa-solid fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://blog.kinoko.fun/2024/06/17/promise/&name=Promiseä½¿ç”¨ä¸€è§ˆ&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://blog.kinoko.fun/2024/06/17/promise/&t=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    
    
      <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81"><span class="toc-number">1.</span> <span class="toc-text">çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-Promise-excutor"><span class="toc-number">2.</span> <span class="toc-text">æ„é€ å‡½æ•° Promise(excutor)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">å®ä¾‹æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#then-onFulfilled-onRejected"><span class="toc-number">1.</span> <span class="toc-text">then(onFulfilled, onRejected)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#catch-onRejected"><span class="toc-number">2.</span> <span class="toc-text">catch(onRejected)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finally-finallyCallback"><span class="toc-number">3.</span> <span class="toc-text">finally(finallyCallback)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">é™æ€æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-all-promiseArray"><span class="toc-number">1.</span> <span class="toc-text">Promise.all(promiseArray)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-allSettled"><span class="toc-number">2.</span> <span class="toc-text">Promise.allSettled</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-race"><span class="toc-number">3.</span> <span class="toc-text">Promise.race</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-reject"><span class="toc-number">4.</span> <span class="toc-text">Promise.reject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-resolve"><span class="toc-number">5.</span> <span class="toc-text">Promise.resolve</span></a></li></ol>
      </div>
    
  </span>
</div>

    
    <div class="content index py4 ">
        
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle p-name" itemprop="name headline">
        Promiseä½¿ç”¨ä¸€è§ˆ
    </h1>



    <div class="meta">
      <span class="author p-author h-card" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span class="p-name" itemprop="name">é˜¿è‡kinoko</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2024-06-16T16:00:00.000Z" class="dt-published" itemprop="datePublished">2024-06-17</time>
        
        (Updated: <time datetime="2025-01-02T07:21:22.228Z" class="dt-updated" itemprop="dateModified">2025-01-02</time>)
        
      
    </div>


      
    <div class="article-category">
        <i class="fa-solid fa-archive"></i>
        <a class="category-link" href="/categories/JavaScript/">JavaScript</a>
    </div>


      

    </div>
  </header>
  

  <div class="content e-content" itemprop="articleBody">
    <p>Promise è§„èŒƒæœ€æ—©ç”± CommonJS ç¤¾åŒºæå‡ºï¼Œåæ¥æˆä¸º ES2015ï¼ˆES6ï¼‰ è¯­è¨€è§„èŒƒï¼Œåˆ°ç°åœ¨å¯ä»¥è¯´å·²ç»æˆäº†å¼‚æ­¥ç¼–ç¨‹çš„é¦–é€‰æ–¹æ¡ˆã€‚</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises">ä½¿ç”¨ Promise - JavaScript | MDN</a></p>
<p><a target="_blank" rel="noopener" href="https://www.liaoxuefeng.com/wiki/1022910821149312/1023024413276544">Promise</a></p>
<h3 id="çŠ¶æ€"><a href="#çŠ¶æ€" class="headerlink" title="çŠ¶æ€"></a>çŠ¶æ€</h3><ul>
<li><code>Penfing</code>  ç­‰å¾…</li>
<li><code>Fulfilled</code> æˆåŠŸ</li>
<li><code>rejected</code> å¤±è´¥</li>
</ul>
<h3 id="æ„é€ å‡½æ•°-Promise-excutor"><a href="#æ„é€ å‡½æ•°-Promise-excutor" class="headerlink" title="æ„é€ å‡½æ•° Promise(excutor)"></a>æ„é€ å‡½æ•° Promise(excutor)</h3><p><code>Promise</code> æ„é€ å‡½æ•°æ˜¯ JavaScript ä¸­ç”¨äºå¤„ç†å¼‚æ­¥æ“ä½œçš„ä¸€ä¸ªé‡è¦å·¥å…·ã€‚</p>
<ul>
<li>**æ„é€ å‡½æ•° <code>Promise(executor)</code>**ï¼š<ul>
<li><code>Promise</code> æ„é€ å‡½æ•°æ¥å—ä¸€ä¸ªåä¸º <code>executor</code> çš„å›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°ã€‚å½“ä½ åˆ›å»ºä¸€ä¸ª <code>Promise</code> å®ä¾‹æ—¶ï¼Œè¿™ä¸ª <code>executor</code> å‡½æ•°ä¼šè¢«ç«‹å³æ‰§è¡Œã€‚</li>
<li><code>executor</code> å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼š<code>resolve</code> å’Œ <code>reject</code>ã€‚è¿™ä¸¤ä¸ªå‚æ•°ä¹Ÿæ˜¯å‡½æ•°ï¼Œä½ å¯ä»¥åœ¨ <code>executor</code> å‡½æ•°å†…éƒ¨è°ƒç”¨å®ƒä»¬æ¥æ”¹å˜ <code>Promise</code> çš„çŠ¶æ€ã€‚</li>
</ul>
</li>
<li><strong>çŠ¶æ€å˜æ›´</strong>ï¼š<ul>
<li>å½“ <code>resolve</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šå°† <code>Promise</code> çš„çŠ¶æ€ä» â€œpendingâ€ï¼ˆç­‰å¾…ï¼‰å˜æ›´ä¸º â€œfulfilledâ€ï¼ˆå·²å®Œæˆï¼‰ã€‚</li>
<li>å½“ <code>reject</code> è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šå°† <code>Promise</code> çš„çŠ¶æ€ä» â€œpendingâ€ï¼ˆç­‰å¾…ï¼‰å˜æ›´ä¸º â€œrejectedâ€ï¼ˆå·²å¤±è´¥ï¼‰ã€‚</li>
<li>å¦‚æœ <code>executor</code> å‡½æ•°ä¸­æŠ›å‡ºäº†ä¸€ä¸ªé”™è¯¯ï¼Œé‚£ä¹ˆ <code>Promise</code> ä¼šè‡ªåŠ¨å˜æ›´ä¸º â€œrejectedâ€ çŠ¶æ€ï¼Œå¹¶ä¸”é”™è¯¯å¯¹è±¡ä¼šè¢«ä½œä¸º <code>reject</code> å‡½æ•°çš„å‚æ•°ä¼ é€’å‡ºå»ã€‚</li>
</ul>
</li>
<li>**è¿”å›æ–°çš„ <code>Promise</code>**ï¼š<ul>
<li>åœ¨ <code>executor</code> å‡½æ•°ä¸­ï¼Œä½ å¯ä»¥é€šè¿‡ <code>resolve</code> è¿”å›ä¸€ä¸ªå€¼ï¼Œæˆ–è€…é€šè¿‡ <code>reject</code> è¿”å›ä¸€ä¸ªé”™è¯¯ã€‚</li>
<li>å¦‚æœä½ åœ¨ <code>resolve</code> ä¸­ä¼ é€’äº†å¦ä¸€ä¸ª <code>Promise</code>ï¼ˆæ¯”å¦‚ <code>Promise.reject(&quot;err&quot;)</code>ï¼‰ï¼Œé‚£ä¹ˆå½“å‰ <code>Promise</code> çš„çŠ¶æ€å°†ä¼šè·Ÿéšä¼ é€’è¿›æ¥çš„ <code>Promise</code> çš„çŠ¶æ€ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜è¿™ä¸ªæ¦‚å¿µï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¼‚æ­¥æ“ä½œ</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> data = <span class="title function_">fetchData</span>(); <span class="comment">// å‡è®¾è¿™æ˜¯ä¸€ä¸ªè·å–æ•°æ®çš„å‡½æ•°</span></span><br><span class="line">    <span class="keyword">if</span> (data) &#123;</span><br><span class="line">      <span class="title function_">resolve</span>(data); <span class="comment">// å¦‚æœæ•°æ®è·å–æˆåŠŸï¼Œä½¿ç”¨resolveæ”¹å˜PromiseçŠ¶æ€ä¸ºfulfilled</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="title function_">reject</span>(<span class="string">&#x27;æ•°æ®è·å–å¤±è´¥&#x27;</span>); <span class="comment">// å¦‚æœæ•°æ®è·å–å¤±è´¥ï¼Œä½¿ç”¨rejectæ”¹å˜PromiseçŠ¶æ€ä¸ºrejected</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.<span class="title function_">then</span>(<span class="function"><span class="params">data</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(data); <span class="comment">// å¦‚æœPromiseçŠ¶æ€ä¸ºfulfilledï¼Œè¿™é‡Œå°†è¾“å‡ºè·å–åˆ°çš„æ•°æ®</span></span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">error</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">error</span>(error); <span class="comment">// å¦‚æœPromiseçŠ¶æ€ä¸ºrejectedï¼Œè¿™é‡Œå°†è¾“å‡ºé”™è¯¯ä¿¡æ¯</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>promise</code> æ˜¯ä¸€ä¸ªæ–°åˆ›å»ºçš„ <code>Promise</code> å¯¹è±¡ã€‚æˆ‘ä»¬ä¼ é€’äº†ä¸€ä¸ª <code>executor</code> å‡½æ•°ç»™ <code>Promise</code> æ„é€ å‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å†…éƒ¨æ‰§è¡Œäº†ä¸€ä¸ªå¼‚æ­¥æ“ä½œï¼ˆ<code>setTimeout</code>ï¼‰ã€‚å½“å¼‚æ­¥æ“ä½œå®Œæˆåï¼Œæˆ‘ä»¬æ ¹æ®ç»“æœè°ƒç”¨ <code>resolve</code> æˆ– <code>reject</code> æ¥æ”¹å˜ <code>Promise</code> çš„çŠ¶æ€ã€‚ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ <code>.then()</code> å’Œ <code>.catch()</code> æ–¹æ³•æ¥å¤„ç† <code>Promise</code> æˆåŠŸæˆ–å¤±è´¥çš„ç»“æœã€‚</p>
<h2 id="å®ä¾‹æ–¹æ³•"><a href="#å®ä¾‹æ–¹æ³•" class="headerlink" title="å®ä¾‹æ–¹æ³•"></a>å®ä¾‹æ–¹æ³•</h2><h3 id="then-onFulfilled-onRejected"><a href="#then-onFulfilled-onRejected" class="headerlink" title="then(onFulfilled, onRejected)"></a>then(onFulfilled, onRejected)</h3><p><img src="https://img.ma5hr00m.top/blog/20240609140952.png" alt="20240609140952"></p>
<p><code>then(onFulfilled, onRejected)</code> æ–¹æ³•æ˜¯ <code>Promise</code> å¯¹è±¡çš„ä¸€ä¸ªéå¸¸é‡è¦çš„ç‰¹æ€§ï¼Œå®ƒå…è®¸ä½ ä¸º <code>Promise</code> æ³¨å†Œ <code>onFulfilled</code> å’Œ <code>onRejected</code> å›è°ƒå‡½æ•°ã€‚</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼š<ul>
<li>ä¸º <code>Promise</code> æ³¨å†Œ <code>onFulfilled</code> å’Œ <code>onRejected</code> å›è°ƒå‡½æ•°ï¼Œè¿™äº›å‡½æ•°åˆ†åˆ«åœ¨ <code>Promise</code> æˆåŠŸï¼ˆfulfilledï¼‰æˆ–å¤±è´¥ï¼ˆrejectedï¼‰æ—¶è¢«è°ƒç”¨ã€‚</li>
<li>è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥å®ç°é“¾å¼è°ƒç”¨ã€‚è¿™æ„å‘³ç€ä½ å¯ä»¥åœ¨ä¸€ä¸ª <code>then</code> è°ƒç”¨åç»§ç»­æ·»åŠ æ›´å¤šçš„ <code>then</code> æˆ– <code>catch</code> æ–¹æ³•ã€‚</li>
</ul>
</li>
<li><strong>ç‰¹æ€§</strong>ï¼š<ul>
<li><code>then</code> æ–¹æ³•ä¼šè‡ªåŠ¨è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡ã€‚è¿™ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡çš„çŠ¶æ€ï¼ˆfulfilled æˆ– rejectedï¼‰å°†ç”± <code>onFulfilled</code> æˆ– <code>onRejected</code> å›è°ƒå‡½æ•°çš„è¿”å›å€¼å†³å®šã€‚</li>
<li>å¦‚æœ <code>onFulfilled</code> æˆ– <code>onRejected</code> å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªå€¼ï¼Œé‚£ä¹ˆæ–°çš„ <code>Promise</code> å°†ä»¥è¿™ä¸ªå€¼ä¸ºç»“æœè¢«è§£å†³ï¼ˆresolveï¼‰ã€‚</li>
<li>å¦‚æœå›è°ƒå‡½æ•°è¿”å›å¦ä¸€ä¸ª <code>Promise</code>ï¼Œé‚£ä¹ˆæ–°çš„ <code>Promise</code> å°†â€œè·Ÿéšâ€è¿™ä¸ª <code>Promise</code> çš„çŠ¶æ€ï¼Œå³å¦‚æœè¿”å›çš„ <code>Promise</code> è¢«è§£å†³ï¼Œæ–°çš„ <code>Promise</code> ä¹Ÿä¼šè¢«è§£å†³ï¼›å¦‚æœè¿”å›çš„ <code>Promise</code> è¢«æ‹’ç»ï¼Œæ–°çš„ <code>Promise</code> ä¹Ÿä¼šè¢«æ‹’ç»ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™ç§æœºåˆ¶å…è®¸ä½ åˆ›å»ºå¤æ‚çš„å¼‚æ­¥ä»£ç åºåˆ—ï¼Œå…¶ä¸­ä¸€ä¸ªæ“ä½œçš„å®Œæˆå¯ä»¥é“¾æ¥åˆ°ä¸‹ä¸€ä¸ªæ“ä½œï¼Œè€Œä¸éœ€è¦åµŒå¥—å›è°ƒå‡½æ•°ã€‚è¿™æ ·åšå¯ä»¥æé«˜ä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ã€‚</p>
<p>ä¾‹å¦‚ï¼Œä½ å¯ä»¥è¿™æ ·ä½¿ç”¨ <code>then</code> æ–¹æ³•ï¼š</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">doSomething</span>()</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">doSomethingElse</span>(result);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">newResult</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title function_">doThirdThing</span>(newResult);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="keyword">function</span>(<span class="params">finalResult</span>) &#123;</span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;æœ€ç»ˆç»“æœ: &#x27;</span> + finalResult);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(failureCallback);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæ¯ä¸ª <code>then</code> éƒ½è¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code>ï¼Œå¹¶ä¸”æ¯ä¸ª <code>Promise</code> çš„è§£å†³å€¼éƒ½æ˜¯ä¸Šä¸€ä¸ªå›è°ƒå‡½æ•°çš„è¿”å›å€¼ã€‚å¦‚æœåœ¨ä»»ä½•ä¸€ä¸ªæ­¥éª¤ä¸­å‡ºç°é”™è¯¯ï¼Œ<code>catch</code> æ–¹æ³•å°†æ•è·è¿™ä¸ªé”™è¯¯ï¼Œä½ å¯ä»¥åœ¨è¿™é‡Œå¤„ç†é”™è¯¯ã€‚è¿™å°±æ˜¯ <code>Promise</code> é“¾å¼è°ƒç”¨çš„å¼ºå¤§ä¹‹å¤„ã€‚</p>
<h3 id="catch-onRejected"><a href="#catch-onRejected" class="headerlink" title="catch(onRejected)"></a>catch(onRejected)</h3><p><code>catch(onRejected)</code> æ–¹æ³•æ˜¯ <code>Promise</code> å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒç”¨äºå¤„ç† <code>Promise</code> è¢«æ‹’ç»ï¼ˆå³æ‰§è¡Œäº† <code>reject</code> å‡½æ•°ï¼‰çš„æƒ…å†µã€‚</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼š<ul>
<li><code>catch(onRejected)</code> æ–¹æ³•ä¸º <code>Promise</code> æ·»åŠ ä¸€ä¸ª <code>onRejected</code> å›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨ <code>Promise</code> è¢«æ‹’ç»æ—¶æ‰§è¡Œã€‚</li>
</ul>
</li>
<li><strong>ç‰¹æ€§</strong>ï¼š<ul>
<li><code>catch</code> æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code> å¯¹è±¡ã€‚</li>
<li>è¿™ä¸ªæ–°çš„ <code>Promise</code> å°†ä»¥ <code>catch</code> æ–¹æ³•ä¸­å›è°ƒå‡½æ•°çš„è¿”å›å€¼æ¥è§£å†³ï¼ˆresolveï¼‰ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ Promise è¢«æ˜ç¡®åœ°æ‹’ç»äº†</span></span><br><span class="line">  <span class="title function_">reject</span>(<span class="number">100</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¤„ç† Promise è¢«æ‹’ç»çš„æƒ…å†µ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(reason); <span class="comment">// è¾“å‡ºï¼š100</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">200</span>; <span class="comment">// &#x27;catch&#x27; å‡½æ•°çš„è¿”å›å€¼å°†ä½œä¸ºæ–° Promise çš„è§£å†³ç»“æœ</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œå¤„ç†ä¸Šä¸€ä¸ª &#x27;catch&#x27; è¿”å›çš„æ–° Promise çš„è§£å†³ç»“æœ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// è¾“å‡ºï¼š200</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ç¤ºä¾‹ä¸­ï¼Œ<code>promise</code> æ˜¯ä¸€ä¸ªè¢«æ˜ç¡®æ‹’ç»ï¼ˆ<code>reject(100)</code>ï¼‰çš„ <code>Promise</code> å¯¹è±¡ã€‚å½“ <code>promise</code> è¢«æ‹’ç»æ—¶ï¼Œ<code>.catch</code> æ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œå¹¶æ‰“å°å‡ºæ‹’ç»çš„åŸå› ï¼ˆåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯æ•°å­— <code>100</code>ï¼‰ã€‚ç„¶åï¼Œ<code>catch</code> æ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°è¿”å›äº†ä¸€ä¸ªå€¼ <code>200</code>ï¼Œè¿™ä¸ªå€¼å°†ä½œä¸ºæ–° <code>Promise</code> çš„è§£å†³ç»“æœã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œ<code>.then</code> æ–¹æ³•è¢«ç”¨æ¥å¤„ç†è¿™ä¸ªæ–° <code>Promise</code> çš„è§£å†³ç»“æœã€‚å› ä¸º <code>catch</code> æ–¹æ³•è¿”å›çš„æ–° <code>Promise</code> è¢«è§£å†³ï¼ˆresolveï¼‰äº†ï¼Œæ‰€ä»¥ <code>.then</code> æ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°ä¼šè¢«æ‰§è¡Œï¼Œå¹¶æ‰“å°å‡º <code>200</code>ã€‚</p>
<p>é€šè¿‡è¿™ç§æ–¹å¼ï¼Œ<code>catch</code> ä¸ä»…å…è®¸æˆ‘ä»¬å¤„ç†é”™è¯¯ï¼Œè¿˜å¯ä»¥æ¢å¤ä»£ç æ‰§è¡Œæµç¨‹ï¼Œå…è®¸åç»­çš„ <code>then</code> æ–¹æ³•ç»§ç»­æ­£å¸¸å·¥ä½œã€‚è¿™æ˜¯ <code>Promise</code> é“¾å¼è°ƒç”¨ä¸­é”™è¯¯å¤„ç†çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ã€‚</p>
<h3 id="finally-finallyCallback"><a href="#finally-finallyCallback" class="headerlink" title="finally(finallyCallback)"></a>finally(finallyCallback)</h3><p><code>finally(finallyCallback)</code> æ–¹æ³•æ˜¯ <code>Promise</code> å¯¹è±¡çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå…è®¸ä½ æ·»åŠ ä¸€ä¸ªä¸ä¾èµ–äº <code>Promise</code> æœ€ç»ˆçŠ¶æ€çš„å›è°ƒå‡½æ•°ã€‚è¿™ä¸ª <code>finallyCallback</code> æ— è®º <code>Promise</code> æˆåŠŸï¼ˆresolvedï¼‰è¿˜æ˜¯å¤±è´¥ï¼ˆrejectedï¼‰ï¼Œéƒ½ä¼šè¢«æ‰§è¡Œã€‚</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼š<ul>
<li><code>finally(finallyCallback)</code> æ–¹æ³•ç»™ <code>Promise</code> æ·»åŠ ä¸€ä¸ªäº‹ä»¶å¤„ç†å›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨ <code>Promise</code> å®Œæˆåæ€»ä¼šæ‰§è¡Œã€‚</li>
</ul>
</li>
<li><strong>ç‰¹æ€§</strong>ï¼š<ul>
<li><code>finally</code> æ–¹æ³•ä¸æ¥æ”¶ä»»ä½•å‚æ•°ï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½ä» <code>finallyCallback</code> å†…éƒ¨è·å–åˆ° <code>Promise</code> çš„æ‰§è¡Œç»“æœã€‚</li>
<li><code>finally</code> æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ <code>Promise</code>ã€‚è¿™ä¸ªæ–°çš„ <code>Promise</code> é€šå¸¸ä¸åŸå§‹ <code>Promise</code> æœ‰ç›¸åŒçš„çŠ¶æ€å’Œå€¼ï¼Œé™¤é <code>finallyCallback</code> ä¸­æŠ›å‡ºäº†å¼‚å¸¸æˆ–è¿”å›äº†ä¸€ä¸ªè¢«æ‹’ç»çš„ <code>Promise</code>ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™é‡Œçš„ Promise è¢«è§£å†³äº†</span></span><br><span class="line">  <span class="title function_">resolve</span>(<span class="number">100</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">finally</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// &#x27;finally&#x27; å›è°ƒå‡½æ•°æ— è®ºæˆåŠŸæˆ–è€…å¤±è´¥ï¼Œå§‹ç»ˆä¼šè¢«æ‰§è¡Œ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;finallyå›è°ƒå‡½æ•°æ— è®ºæˆåŠŸæˆ–è€…å¤±è´¥ï¼Œå§‹ç»ˆä¼šè¢«æ‰§è¡Œ&quot;</span>);</span><br><span class="line">    <span class="comment">// &#x27;finally&#x27; å›è°ƒå‡½æ•°å†…è·å–ä¸åˆ°promiseæ‰§è¡Œç»“æœï¼Œæ‰€ä»¥è¿™é‡Œæ‰“å° undefined</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// è¾“å‡ºï¼šundefined</span></span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// &#x27;finally&#x27; å›è°ƒå‡½æ•°è¿”å›ä¸€ä¸ªæ–°çš„promiseï¼Œå®ç°é“¾å¼è°ƒç”¨</span></span><br><span class="line">    <span class="comment">// è¿™é‡Œçš„ &#x27;res&#x27; æ˜¯ä¸Šä¸€ä¸ª &#x27;resolve&#x27; çš„ç»“æœ</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// è¾“å‡ºï¼š100</span></span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>åœ¨ä»¥ä¸Šä»£ç ç¤ºä¾‹ä¸­ï¼Œ<code>promise</code> æ˜¯ä¸€ä¸ªè¢«è§£å†³ï¼ˆ<code>resolve(100)</code>ï¼‰çš„ <code>Promise</code> å¯¹è±¡ã€‚<code>.finally</code> æ–¹æ³•æ·»åŠ äº†ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåœ¨ <code>Promise</code> å®Œæˆåæ‰§è¡Œï¼Œä½†å®ƒä¸ä¼šæ¥æ”¶ä»»ä½•å‚æ•°ï¼Œå› æ­¤ <code>console.log(res);</code> ä¸­çš„ <code>res</code> æ˜¯ <code>undefined</code>ã€‚</p>
<p>ç„¶åï¼Œ<code>.then</code> æ–¹æ³•å¤„ç† <code>Promise</code> çš„è§£å†³ç»“æœã€‚ç”±äº <code>finally</code> æ–¹æ³•ä¸æ”¹å˜ <code>Promise</code> çš„çŠ¶æ€æˆ–å€¼ï¼ˆé™¤éæŠ›å‡ºå¼‚å¸¸æˆ–è¿”å›è¢«æ‹’ç»çš„ <code>Promise</code>ï¼‰ï¼Œæ‰€ä»¥ <code>.then</code> æ–¹æ³•ä¸­çš„å›è°ƒå‡½æ•°ä¼šæ¥æ”¶åˆ° <code>100</code> å¹¶æ‰“å°å‡ºæ¥ã€‚</p>
<p><code>finally</code> æ–¹æ³•é€šå¸¸ç”¨äºæ‰§è¡Œæ¸…ç†æ“ä½œï¼Œä¾‹å¦‚å…³é—­æ–‡ä»¶ã€æ¸…é™¤è¶…æ—¶ç­‰ï¼Œè¿™äº›æ“ä½œä¸ä¾èµ–äºæ“ä½œçš„æˆåŠŸæˆ–å¤±è´¥ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼Œå› ä¸ºä½ ä¸éœ€è¦åœ¨ <code>then</code> å’Œ <code>catch</code> ä¸­é‡å¤ç›¸åŒçš„æ¸…ç†é€»è¾‘ã€‚</p>
<h2 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h2><h3 id="Promise-all-promiseArray"><a href="#Promise-all-promiseArray" class="headerlink" title="Promise.all(promiseArray)"></a>Promise.all(promiseArray)</h3><p><code>Promise.all(promiseArray)</code> æ˜¯ä¸€ä¸ªç”¨äºå¤„ç†å¤šä¸ª <code>Promise</code> å¯¹è±¡çš„æ–¹æ³•ã€‚å®ƒæ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªæ•°ç»„å¯ä»¥åŒ…å« <code>Promise</code> å¯¹è±¡æˆ–å…¶ä»–å€¼ã€‚</p>
<ul>
<li><strong>ä½œç”¨</strong>ï¼š<ul>
<li><code>Promise.all</code> æ¥å—ä¸€ä¸ªæ•°ç»„ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªæ•°ç»„ä¸­å¯ä»¥åŒ…å« <code>Promise</code> å¯¹è±¡å’Œå…¶ä»–ç±»å‹çš„å€¼ã€‚</li>
<li>å®ƒå°†å¹¶å‘æ‰§è¡Œæ•°ç»„ä¸­çš„æ‰€æœ‰ <code>Promise</code> å¯¹è±¡ï¼Œå¹¶ä¸”ä¼šç­‰å¾…æ‰€æœ‰ <code>Promise</code> å¯¹è±¡æ‰§è¡Œå®Œæ¯•ã€‚</li>
</ul>
</li>
<li><strong>ç‰¹æ€§</strong>ï¼š<ul>
<li>æ‰§è¡Œç»“æœä¼šä»¥æ•°ç»„å½¢å¼è¿”å›ï¼Œæ•°ç»„ä¸­çš„å…ƒç´ é¡ºåºä¸ä¼ å…¥çš„ <code>promiseArray</code> ä¸€ä¸€å¯¹åº”ã€‚</li>
<li>å¦‚æœæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯æ™®é€šå€¼ï¼Œ<code>Promise.all</code> ä¼šç›´æ¥å°†è¿™äº›å€¼æ”¾å…¥ç»“æœæ•°ç»„ä¸­ã€‚</li>
<li>å¦‚æœæ•°ç»„ä¸­çš„å…ƒç´ æ˜¯ <code>Promise</code> å¯¹è±¡ï¼Œ<code>Promise.all</code> ä¼šç­‰å¾…è¿™äº› <code>Promise</code> å¯¹è±¡æ‰§è¡Œç»“æŸï¼Œå¹¶å°†ç»“æœæ”¾å…¥è¿”å›çš„æ•°ç»„ä¸­ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸¤ä¸ª Promise å¯¹è±¡</span></span><br><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;p1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;p2&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä½¿ç”¨ Promise.all å¤„ç†åŒ…å«æ™®é€šå€¼å’Œ Promise å¯¹è±¡çš„æ•°ç»„</span></span><br><span class="line"><span class="keyword">const</span> promiseAll = <span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="number">1</span>, <span class="number">2</span>, promise1, <span class="number">3</span>, <span class="number">4</span>, promise2, <span class="number">5</span>]);</span><br><span class="line">promiseAll.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å¹¶å‘æ‰§è¡Œ Promiseï¼Œç­‰å¾…æ‰€æœ‰ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åç»Ÿä¸€è¿”å›ç»“æœ</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">// è¾“å‡ºï¼š[1, 2, &quot;p1&quot;, 3, 4, &quot;p2&quot;, 5]</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¦‚æœæ•°ç»„ä¸­çš„ä»»ä½•ä¸€ä¸ª Promise æ‰§è¡Œå¤±è´¥ï¼Œæ•´ä¸ª Promise.all å°†æ‰§è¡Œå¤±è´¥</span></span><br><span class="line"><span class="keyword">const</span> promiseAllFail = <span class="title class_">Promise</span>.<span class="title function_">all</span>([<span class="number">1</span>, <span class="number">2</span>, promise1, <span class="number">3</span>, <span class="number">4</span>, <span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&#x27;å¤±è´¥&#x27;</span>), <span class="number">5</span>]);</span><br><span class="line">promiseAllFail.<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">&#125;).<span class="title function_">catch</span>(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// ä»»ä½•ä¸€ä¸ªä»»åŠ¡å¤±è´¥ï¼Œå°†å¯¼è‡´æ•´ä¸ª Promise.all æ‰§è¡Œå¤±è´¥</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;fail&#x27;</span>, e); <span class="comment">// è¾“å‡ºï¼šfail å¤±è´¥</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åœ¨ä»£ç ç¤ºä¾‹ä¸­ï¼Œ<code>promise1</code> å’Œ <code>promise2</code> æ˜¯ä¸¤ä¸ª <code>Promise</code> å¯¹è±¡ï¼Œå®ƒä»¬åˆ†åˆ«åœ¨ 2000 æ¯«ç§’å’Œ 1000 æ¯«ç§’åè§£å†³ã€‚<code>promise2</code> è¢«æ‹’ç»äº†ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œ<code>Promise.all</code> è¿”å›çš„ <code>Promise</code> ä¹Ÿä¼šè¢«æ‹’ç»ï¼Œå¹¶ä¸” <code>catch</code> æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœ <code>promiseArray</code> ä¸­ä»»ä½•ä¸€ä¸ª <code>Promise</code> å¯¹è±¡è¢«æ‹’ç»ï¼Œ<code>Promise.all</code> è¿”å›çš„ <code>Promise</code> ä¹Ÿä¼šè¢«æ‹’ç»ï¼Œå³ä½¿å…¶ä»– <code>Promise</code> å¯¹è±¡å·²ç»æˆåŠŸè§£å†³ã€‚</p>
<h3 id="Promise-allSettled"><a href="#Promise-allSettled" class="headerlink" title="Promise.allSettled"></a>Promise.allSettled</h3><p><code>Promise.allSettled</code> å…è®¸ä½ åŒæ—¶å¤„ç†å¤šä¸ª promiseã€‚è¿™ä¸ªæ–¹æ³•ä¼šç­‰å¾…æ‰€æœ‰ä¼ å…¥çš„ promises è¦ä¹ˆå®Œæˆï¼ˆfulfilledï¼‰ï¼Œè¦ä¹ˆæ‹’ç»ï¼ˆrejectedï¼‰ï¼Œç„¶åè¿”å›ä¸€ä¸ªå¯¹è±¡æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡è¡¨ç¤ºå¯¹åº”çš„ promise ç»“æœã€‚</p>
<ul>
<li><strong>ç‰¹æ€§</strong><ul>
<li><strong>è¿”å›å€¼</strong>ï¼šå®ƒè¿”å›ä¸€ä¸ª promiseï¼Œè¯¥ promise åœ¨æ‰€æœ‰ç»™å®šçš„ promises å·²ç»å®Œæˆæˆ–æ‹’ç»åè§£å†³ã€‚</li>
<li><strong>ç»“æœå¯¹è±¡</strong>ï¼šæ¯ä¸ªç»“æœéƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«ä¸¤ä¸ªå±æ€§ï¼š<code>status</code> å’Œ <code>value</code> æˆ– <code>reason</code>ã€‚å¦‚æœ promise æˆåŠŸå®Œæˆï¼Œ<code>status</code> ä¸º <code>&#39;fulfilled&#39;</code>ï¼Œå¹¶ä¸” <code>value</code> å±æ€§ä¼šåŒ…å« promise çš„ç»“æœã€‚å¦‚æœ promise è¢«æ‹’ç»ï¼Œ<code>status</code> ä¸º <code>&#39;rejected&#39;</code>ï¼Œå¹¶ä¸” <code>reason</code> å±æ€§ä¼šåŒ…å«æ‹’ç»çš„åŸå› ã€‚</li>
<li><strong>é”™è¯¯å¤„ç†</strong>ï¼šä¸ <code>Promise.all</code> ä¸åŒï¼Œ<code>Promise.allSettled</code> ä¸ä¼šåœ¨é‡åˆ°ç¬¬ä¸€ä¸ªæ‹’ç»çš„ promise æ—¶ç«‹å³æ‹’ç»ã€‚å®ƒä¼šç­‰å¾…æ‰€æœ‰çš„ promises éƒ½å·²ç»å®Œæˆæˆ–æ‹’ç»ï¼Œç»™ä½ ä¸€ä¸ªå®Œæ•´çš„ç»“æœé›†ã€‚</li>
</ul>
</li>
</ul>
<p>è¿™é‡Œå°±ä¸ç»™ä»£ç ç¤ºèŒƒäº†ï¼Œç›´æ¥æŠŠè¿™ä¸ªæ–¹æ³•å½“ä½œ <code>.all</code> çš„æ”¹ç‰ˆå°±è¡Œã€‚ä½†æ³¨æ„ï¼Œè™½ç„¶ <code>Promise.allSettled</code> ç›®å‰å·²ç»æ˜¯ ECMAScript 2020 æ ‡å‡†çš„ä¸€éƒ¨åˆ†ï¼Œä½†åœ¨ä¸€äº›æ—§çš„æµè§ˆå™¨ç‰ˆæœ¬ä¸­å¯èƒ½ä¸è¢«æ”¯æŒã€‚åœ¨ä½¿ç”¨ä¹‹å‰ï¼Œæœ€å¥½æ£€æŸ¥ç›®æ ‡ç¯å¢ƒæ˜¯å¦æ”¯æŒè¿™ä¸ªç‰¹æ€§ã€‚å¦‚æœä¸æ”¯æŒï¼Œå°±éœ€è¦ä½¿ç”¨ä¸€ä¸ª polyfill æ¥æä¾›ç›¸åŒçš„åŠŸèƒ½ã€‚</p>
<h3 id="Promise-race"><a href="#Promise-race" class="headerlink" title="Promise.race"></a><strong>Promise.race</strong></h3><p><strong><code>Promise.race</code></strong>Â ç”¨æ¥å¤„ç†å¤šä¸ª promisesã€‚è¿™ä¸ªæ–¹æ³•æ¥å—ä¸€ä¸ª promise æ•°ç»„ä½œä¸ºè¾“å…¥ï¼Œå¹¶ä¸”ä¼šè¿”å›ä¸€ä¸ªæ–°çš„ promiseï¼Œè¿™ä¸ªæ–°çš„ promise ä¼šä»¥æ•°ç»„ä¸­<strong>ç¬¬ä¸€ä¸ª</strong>å®Œæˆï¼ˆæ— è®ºæ˜¯è§£å†³è¿˜æ˜¯æ‹’ç»ï¼‰çš„ promise çš„ç»“æœæ¥è§£å†³ã€‚</p>
<ul>
<li>ç‰¹å¾<ul>
<li><strong>å¹¶å‘æ‰§è¡Œ</strong>ï¼šä¼ å…¥çš„æ‰€æœ‰ promises ä¼šåŒæ—¶å¼€å§‹æ‰§è¡Œã€‚</li>
<li><strong>å¿«é€Ÿå“åº”</strong>ï¼šåªè¦æ•°ç»„ä¸­çš„ä»»ä½•ä¸€ä¸ª promise å®Œæˆï¼Œ**<code>Promise.race</code>**Â å°±ä¼šç«‹å³è§£å†³ã€‚</li>
<li><strong>ç»“æœ</strong>ï¼šè¿”å›çš„ promise çš„ç»“æœæ˜¯æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå®Œæˆçš„ promise çš„ç»“æœã€‚</li>
<li><strong>ç”¨é€”</strong>ï¼šå¸¸ç”¨äºå®ç°è¶…æ—¶åŠŸèƒ½ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä¸€ä¸ªç½‘ç»œè¯·æ±‚åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰å“åº”ï¼Œå°±ä¼šè¢«è®¤ä¸ºæ˜¯è¶…æ—¶ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> promise1 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;p1&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">2000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise2 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">resolve</span>(<span class="string">&quot;p2&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">1000</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> promise3 = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// å‡è®¾500æ¯«ç§’åç½‘ç»œè¶…æ—¶</span></span><br><span class="line">  <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">reject</span>(<span class="string">&quot;è¶…æ—¶äº†&quot;</span>);</span><br><span class="line">  &#125;, <span class="number">500</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promiseRace = <span class="title class_">Promise</span>.<span class="title function_">race</span>([promise1, promise2, promise3]);</span><br><span class="line">promiseRace</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™é‡Œä¼šæ‰“å°å‡º &quot;è¶…æ—¶äº†&quot;ï¼Œå› ä¸º promise3 æ˜¯æœ€å¿«å®Œæˆçš„</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">e</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// å¦‚æœ promise3 è¢«æ‹’ç»ï¼Œé”™è¯¯ä¼šåœ¨è¿™é‡Œè¢«æ•è·</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;fail&quot;</span>, e);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ä»£ç ç¤ºä¾‹ä¸­ï¼Œ**<code>promise1</code><strong>ã€</strong><code>promise2</code>**Â å’ŒÂ <strong><code>promise3</code></strong>Â åˆ†åˆ«è®¾ç½®äº†ä¸åŒçš„è¶…æ—¶æ—¶é—´ã€‚**<code>Promise.race</code>**Â ä¼šè¿”å›æœ€å¿«å®Œæˆçš„ promise çš„ç»“æœã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ**<code>promise3</code>**Â ç”±äºè®¾ç½®äº†æœ€çŸ­çš„è¶…æ—¶æ—¶é—´ï¼ˆ500æ¯«ç§’ï¼‰ï¼Œæ‰€ä»¥å®ƒä¼šé¦–å…ˆå®Œæˆï¼Œæ— è®ºæ˜¯è§£å†³è¿˜æ˜¯æ‹’ç»ï¼Œ**<code>Promise.race</code>**Â éƒ½ä¼šä»¥Â <strong><code>promise3</code></strong>Â çš„ç»“æœæ¥è§£å†³ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ**<code>Promise.race</code>**Â å¯ä»¥å¸®åŠ©ä½ ç¡®ä¿ä½ çš„ç¨‹åºåœ¨é‡åˆ°æ…¢ç½‘ç»œè¿æ¥æˆ–è€…å…¶ä»–å¯èƒ½å¯¼è‡´å»¶è¿Ÿçš„æƒ…å†µæ—¶ï¼Œèƒ½å¤ŸåŠæ—¶å“åº”ã€‚</p>
<h3 id="Promise-reject"><a href="#Promise-reject" class="headerlink" title="Promise.reject"></a><strong>Promise.reject</strong></h3><p><strong><code>Promise.reject</code></strong>Â æ–¹æ³•åœ¨ JavaScript ä¸­ç”¨äºåˆ›å»ºä¸€ä¸ªçŠ¶æ€ä¸ºæ‹’ç»ï¼ˆrejectedï¼‰çš„ Promiseã€‚è¿™ä¸ªæ–¹æ³•é€šå¸¸ç”¨äºæµ‹è¯•æˆ–è€…å½“ä½ éœ€è¦ä¸€ä¸ªå·²çŸ¥ä¼šå¤±è´¥çš„ Promise æ—¶ã€‚</p>
<ul>
<li>ç‰¹å¾<ul>
<li>ä½ å¯ä»¥ä¼ é€’ä»»ä½•ç†ç”±ï¼ˆreasonï¼‰ï¼Œè¿™ä¸ªç†ç”±ä¼šè¢«ä¼ é€’ç»™Â <strong><code>.catch()</code></strong>Â æ–¹æ³•çš„å›è°ƒå‡½æ•°ã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="title class_">Promise</span>.<span class="title function_">reject</span>(<span class="string">&quot;rejected&quot;</span>)</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªå›è°ƒä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸º Promise å·²ç»è¢«æ‹’ç»</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;value&#x27;</span>, res);</span><br><span class="line">  &#125;)</span><br><span class="line">  .<span class="title function_">catch</span>(<span class="function">(<span class="params">reason</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªå›è°ƒä¼šè¢«è°ƒç”¨ï¼Œæ‰“å°å‡º &quot;reason rejected&quot;</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;reason&#x27;</span>, reason);</span><br><span class="line">  &#125;);</span><br></pre></td></tr></table></figure>

<p>ä»£ç ç¤ºä¾‹ä¸­ï¼Œ**<code>Promise.reject</code>**Â è¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªç«‹å³å¤±è´¥çš„ Promiseï¼Œå¹¶ä¸”æä¾›äº†ä¸€ä¸ªå­—ç¬¦ä¸² â€œrejectedâ€ ä½œä¸ºå¤±è´¥çš„ç†ç”±ã€‚ç„¶åï¼Œä½¿ç”¨Â <strong><code>.then()</code></strong>Â æ–¹æ³•æ¥è®¾ç½®ä¸€ä¸ªå¤„ç†æˆåŠŸè§£å†³çš„å›è°ƒå‡½æ•°ï¼Œä»¥åŠä½¿ç”¨Â <strong><code>.catch()</code></strong>Â æ–¹æ³•æ¥è®¾ç½®ä¸€ä¸ªå¤„ç†æ‹’ç»çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ**<code>Promise.reject</code>**Â å¯ä»¥ç”¨äºå¿«é€Ÿåˆ›å»ºä¸€ä¸ªå¤±è´¥çš„ Promiseï¼Œä»¥ä¾¿äºåœ¨å‡½æ•°ä¸­è¿›è¡Œé”™è¯¯å¤„ç†æˆ–è€…åœ¨æµ‹è¯•ä¸­æ¨¡æ‹Ÿå¤±è´¥çš„å¼‚æ­¥æ“ä½œã€‚</p>
<h3 id="Promise-resolve"><a href="#Promise-resolve" class="headerlink" title="Promise.resolve"></a>Promise.resolve</h3><p><code>Promise.resolve</code> æ–¹æ³•åœ¨ JavaScript ä¸­ç”¨äºåˆ›å»ºä¸€ä¸ªçŠ¶æ€ä¸ºè§£å†³ï¼ˆfulfilledï¼‰çš„ Promiseã€‚è¿™ä¸ªæ–¹æ³•å¯ä»¥æ¥å—ä»»ä½•å€¼ï¼Œå¹¶è¿”å›ä¸€ä¸ªä»¥è¯¥å€¼è§£å†³çš„ Promiseã€‚</p>
<ul>
<li><strong>ç‰¹å¾</strong><ul>
<li><strong>æ™®é€šå€¼</strong>ï¼šå¦‚æœä¼ é€’ç»™ <code>Promise.resolve</code> çš„æ˜¯ä¸€ä¸ªæ™®é€šå€¼ï¼Œå®ƒä¼šè¿”å›ä¸€ä¸ªæ–°çš„ Promiseï¼Œè¯¥ Promise ä¼šç«‹å³ä»¥è¯¥å€¼è§£å†³ã€‚</li>
<li><strong>Promise å€¼</strong>ï¼šå¦‚æœä¼ é€’çš„å€¼æœ¬èº«æ˜¯ä¸€ä¸ª Promiseï¼Œ<code>Promise.resolve</code> å°†ä¸ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„ Promiseï¼Œè€Œæ˜¯è¿”å›é‚£ä¸ªåŸå§‹çš„ Promiseã€‚</li>
</ul>
</li>
</ul>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªç«‹å³è§£å†³ä¸º100çš„Promise</span></span><br><span class="line"><span class="title class_">Promise</span>.<span class="title function_">resolve</span>(<span class="number">100</span>).<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// è¿™ä¸ªå›è°ƒä¼šè¢«è°ƒç”¨ï¼Œæ‰“å°å‡º100</span></span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(res); <span class="comment">//100</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// åˆ›å»ºä¸€ä¸ªæ–°çš„Promiseï¼Œå®ƒå°†ä¼šè¢«æ‹’ç»</span></span><br><span class="line"><span class="keyword">const</span> promise = <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="title function_">reject</span>(<span class="number">200</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// è¿™é‡Œçš„.then()æ²¡æœ‰æä¾›æ‹’ç»å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥æ‹’ç»å°†ä¸ä¼šè¢«å¤„ç†</span></span><br><span class="line">promise</span><br><span class="line">  .<span class="title function_">then</span>(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªå›è°ƒä¸ä¼šè¢«è°ƒç”¨ï¼Œå› ä¸ºPromiseå·²ç»è¢«æ‹’ç»</span></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(res);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»£ç ç¤ºä¾‹ä¸­ï¼Œ<code>Promise.resolve</code> è¢«ç”¨æ¥åˆ›å»ºä¸€ä¸ªç«‹å³ä»¥æ•°å­— <code>100</code> è§£å†³çš„ Promiseã€‚ç„¶åï¼Œä½¿ç”¨ <code>.then()</code> æ–¹æ³•æ¥è®¾ç½®ä¸€ä¸ªå¤„ç†è§£å†³çš„å›è°ƒå‡½æ•°ã€‚</p>
<p>è¯·æ³¨æ„ï¼Œç¬¬äºŒä¸ªä¾‹å­ä¸­çš„ Promise è¢«æ‹’ç»äº†ï¼Œä½†æ˜¯æ²¡æœ‰æä¾› <code>.catch()</code> æ–¹æ³•æˆ–æ‹’ç»å¤„ç†å‡½æ•°ï¼Œæ‰€ä»¥æ‹’ç»ä¸ä¼šè¢«æ•è·æˆ–å¤„ç†ã€‚åœ¨å®é™…åº”ç”¨ä¸­ï¼Œ<code>Promise.resolve</code> å¯ä»¥ç”¨äºç¡®ä¿æœ‰ä¸€ä¸ªè§£å†³çš„ Promiseï¼Œè¿™åœ¨å¤„ç†åŒæ­¥å’Œå¼‚æ­¥ä»£ç æ—¶éå¸¸æœ‰ç”¨ã€‚</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
        
          <li><a href="/">ğŸ“„é¦–é¡µ</a></li>
        
          <li><a href="/archives/">ğŸ“‚å½’æ¡£</a></li>
        
          <li><a href="/friends/">ğŸ‘«å‹é“¾</a></li>
        
          <li><a href="/categories/">ğŸ—‚ï¸åˆ†ç±»</a></li>
        
          <li><a href="/tags/">ğŸ·ï¸æ ‡ç­¾</a></li>
        
          <li><a href="/about/">ğŸŒ¸å…³äº</a></li>
        
          <li><a href="/log/">ğŸ“–æ—¥å¿—</a></li>
        
          <li><a href="/search/">ğŸ”æœç´¢</a></li>
        
      </ul>
    </div>

    
    
      <div id="toc-footer" style="display: none">
        <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81"><span class="toc-number">1.</span> <span class="toc-text">çŠ¶æ€</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0-Promise-excutor"><span class="toc-number">2.</span> <span class="toc-text">æ„é€ å‡½æ•° Promise(excutor)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">å®ä¾‹æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#then-onFulfilled-onRejected"><span class="toc-number">1.</span> <span class="toc-text">then(onFulfilled, onRejected)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#catch-onRejected"><span class="toc-number">2.</span> <span class="toc-text">catch(onRejected)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#finally-finallyCallback"><span class="toc-number">3.</span> <span class="toc-text">finally(finallyCallback)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-number"></span> <span class="toc-text">é™æ€æ–¹æ³•</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-all-promiseArray"><span class="toc-number">1.</span> <span class="toc-text">Promise.all(promiseArray)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-allSettled"><span class="toc-number">2.</span> <span class="toc-text">Promise.allSettled</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-race"><span class="toc-number">3.</span> <span class="toc-text">Promise.race</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-reject"><span class="toc-number">4.</span> <span class="toc-text">Promise.reject</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Promise-resolve"><span class="toc-number">5.</span> <span class="toc-text">Promise.resolve</span></a></li></ol>
      </div>
    

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://blog.kinoko.fun/2024/06/17/promise/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://blog.kinoko.fun/2024/06/17/promise/&text=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://blog.kinoko.fun/2024/06/17/promise/&is_video=false&description=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Promiseä½¿ç”¨ä¸€è§ˆ&body=Check out this article: https://blog.kinoko.fun/2024/06/17/promise/"><i class="fa-solid fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://blog.kinoko.fun/2024/06/17/promise/&title=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://blog.kinoko.fun/2024/06/17/promise/&name=Promiseä½¿ç”¨ä¸€è§ˆ&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://blog.kinoko.fun/2024/06/17/promise/&t=Promiseä½¿ç”¨ä¸€è§ˆ"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa-solid fa-bars fa-lg" aria-hidden="true"></i> èœå•</a>
        
          <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa-solid fa-list fa-lg" aria-hidden="true"></i> ç›®å½•</a>
        
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa-solid fa-share-alt fa-lg" aria-hidden="true"></i> åˆ†äº«</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa-solid fa-chevron-up fa-lg" aria-hidden="true"></i> è¿”å›é¡¶éƒ¨</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    <div class="footer-cnrecord">
      <img id="gongan" alt class="gongan-logo"
          src="/images/gongan.png" />
      æµ™ICPå¤‡2023028448å·-2
    </div>
    <div class="footer-copyright">
      Copyright &copy;
      
      
      2022-2025
      é˜¿è‡kinoko
    </div>
  </div>
  <div class="footer-right">
    <nav>
      <ul>
        <!--
       --><li><a href="/">ğŸ“„é¦–é¡µ</a></li><!--
     --><!--
       --><li><a href="/archives/">ğŸ“‚å½’æ¡£</a></li><!--
     --><!--
       --><li><a href="/friends/">ğŸ‘«å‹é“¾</a></li><!--
     --><!--
       --><li><a href="/categories/">ğŸ—‚ï¸åˆ†ç±»</a></li><!--
     --><!--
       --><li><a href="/tags/">ğŸ·ï¸æ ‡ç­¾</a></li><!--
     --><!--
       --><li><a href="/about/">ğŸŒ¸å…³äº</a></li><!--
     --><!--
       --><li><a href="/log/">ğŸ“–æ—¥å¿—</a></li><!--
     --><!--
       --><li><a href="/search/">ğŸ”æœç´¢</a></li><!--
     -->
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->



  <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" onload="this.onload=null;this.rel='stylesheet'"/>


    <!-- jquery -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" crossorigin="anonymous"></script>




<!-- clipboard -->

  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.7/clipboard.min.js" crossorigin="anonymous"></script>
  
  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"å¤åˆ¶åˆ°ç²˜è´´æ¿ï¼\">";
    btn += '<i class="fa-regular fa-clone"></i>';
    btn += '</span>';
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "å¤åˆ¶æˆåŠŸï¼");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Baidu Analytics -->

<!-- Cloudflare Analytics -->

<!-- Disqus Comments -->

<!-- utterances Comments -->

</body>
</html>
